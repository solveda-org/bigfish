<?xml version="1.0" encoding="UTF-8" ?>

<simple-methods xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/simple-methods.xsd">

    <simple-method method-name="validateContactUs" short-description="validate Conatact Us" login-required="false">

        <!-- Check Contact Us form -->
        <if-empty field="parameters.contactReason">
            <property-to-field field="tempErrorMessage" resource="OSafeUiLabels" property="ContactReasonMissingError"/>
            <string-to-list string="${tempErrorMessage}" message-field="contactReason" list="error_list"/>
        </if-empty>
        <if-empty field="parameters.firstName">
            <property-to-field field="tempErrorMessage" resource="OSafeUiLabels" property="FirstNameMissingError"/>
            <string-to-list string="${tempErrorMessage}" message-field="firstName" list="error_list"/>
        </if-empty>
        <if-empty field="parameters.lastName">
            <property-to-field field="tempErrorMessage" resource="OSafeUiLabels" property="LastNameMissingError"/>
            <string-to-list string="${tempErrorMessage}" message-field="lastName" list="error_list"/>
        </if-empty>
        <if-empty field="parameters.emailAddress">
            <property-to-field field="tempErrorMessage" resource="OSafeUiLabels" property="EmailAddressMissingError"/>
            <string-to-list string="${tempErrorMessage}" message-field="emailAddress" list="error_list"/>
        </if-empty>
        <if-not-empty field="parameters.emailAddress">
            <call-map-processor in-map-name="parameters" out-map-name="emailContext">
                <simple-map-processor name="newEmail">
                    <process field="emailAddress">
                        <copy to-field="emailAddress"/>
                        <validate-method method="isEmail"><fail-property resource="OSafeUiLabels" property="EmailInvalidError"/></validate-method>
                    </process>
                </simple-map-processor>
            </call-map-processor>
        </if-not-empty>
        <if-empty field="parameters.content">
            <property-to-field field="tempErrorMessage" resource="OSafeUiLabels" property="CommentMissingError"/>
            <string-to-list string="${tempErrorMessage}" message-field="content" list="error_list"/>
        </if-empty>
        <check-errors/>

    </simple-method>
</simple-methods>
